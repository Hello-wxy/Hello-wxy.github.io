<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/white/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="超级全面的JavaWeb学习笔记，包含前端三件套以及后端的maven、http协议、分层解耦、MySQL、Mybatis、JWT、过滤器拦截器、事务管理、AOP、bean管理、SpringBoot等干货笔记！">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaWeb学习笔记">
<meta property="og:url" content="http://example.com/2024/05/09/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Hello-wxy！">
<meta property="og:description" content="超级全面的JavaWeb学习笔记，包含前端三件套以及后端的maven、http协议、分层解耦、MySQL、Mybatis、JWT、过滤器拦截器、事务管理、AOP、bean管理、SpringBoot等干货笔记！">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2024/05/09/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240418221316619.png">
<meta property="og:image" content="http://example.com/2024/05/09/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240419002937952.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/c3812d21ce1684d886bb62415887ece0.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/234b9c09798e981d31f81fba44d0fffa.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20201024114004740.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1MTkwNDky,size_16,color_FFFFFF,t_70#pic_center">
<meta property="article:published_time" content="2024-05-09T14:51:20.991Z">
<meta property="article:modified_time" content="2024-05-09T15:01:39.094Z">
<meta property="article:author" content="王香芋">
<meta property="article:tag" content="Java、笔记">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2024/05/09/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240418221316619.png">


<link rel="canonical" href="http://example.com/2024/05/09/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2024/05/09/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","path":"2024/05/09/JavaWeb学习笔记/","title":"JavaWeb学习笔记"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>JavaWeb学习笔记 | Hello-wxy！</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>
  <a target="_blank" rel="noopener" href="https://github.com/Hello-wxy" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Hello-wxy！</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">王香芋 & 博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">JavaWeb学习笔记</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E5%89%8D%E7%AB%AF"><span class="nav-text">一、前端</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-HTML"><span class="nav-text">1.HTML</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-CSS"><span class="nav-text">2.CSS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-JavaScript%EF%BC%88JS%EF%BC%89"><span class="nav-text">3.JavaScript（JS）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%C2%B7%E5%BC%95%E5%85%A5%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="nav-text">·引入方式：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%C2%B7%E4%B9%A6%E5%86%99%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="nav-text">·书写语法：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%C2%B7%E5%8F%98%E9%87%8F%EF%BC%9A"><span class="nav-text">·变量：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%C2%B7%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%9A"><span class="nav-text">·数据类型：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%C2%B7%E8%BF%90%E7%AE%97%E7%AC%A6%EF%BC%9A"><span class="nav-text">·运算符：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%C2%B7%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%EF%BC%9A"><span class="nav-text">·类型转换：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%C2%B7%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="nav-text">·函数：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%C2%B7JS%E5%AF%B9%E8%B1%A1%EF%BC%9A"><span class="nav-text">·JS对象：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Array%EF%BC%9A"><span class="nav-text">Array：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#String"><span class="nav-text">String:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JSON"><span class="nav-text">JSON:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#BOM"><span class="nav-text">BOM:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DOM%EF%BC%9A"><span class="nav-text">DOM：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JS%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC"><span class="nav-text">JS事件监听</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E5%90%8E%E7%AB%AF"><span class="nav-text">二、后端</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-maven"><span class="nav-text">1.maven</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-HTTP%E5%8D%8F%E8%AE%AE"><span class="nav-text">2.HTTP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%C2%B7%E7%89%B9%E7%82%B9%EF%BC%9A"><span class="nav-text">·特点：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%C2%B7%E8%AF%B7%E6%B1%82%E6%A0%BC%E5%BC%8F%EF%BC%9A"><span class="nav-text">·请求格式：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%C2%B7%E5%93%8D%E5%BA%94%E6%A0%BC%E5%BC%8F%EF%BC%9A"><span class="nav-text">·响应格式：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tomcat"><span class="nav-text">Tomcat</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E5%93%8D%E5%BA%94"><span class="nav-text">请求响应</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%EF%BC%9A"><span class="nav-text">请求：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E5%8F%82%E6%95%B0%EF%BC%9A"><span class="nav-text">简单参数：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E4%BD%93%E5%8F%82%E6%95%B0%EF%BC%9A"><span class="nav-text">实体参数：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E9%9B%86%E5%90%88%E5%8F%82%E6%95%B0%EF%BC%9A"><span class="nav-text">数组集合参数：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E5%8F%82%E6%95%B0%EF%BC%9A"><span class="nav-text">日期参数：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Json%E5%8F%82%E6%95%B0%EF%BC%9A"><span class="nav-text">Json参数：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E5%BE%84%E5%8F%82%E6%95%B0%EF%BC%9A"><span class="nav-text">路径参数：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%EF%BC%9A"><span class="nav-text">响应：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ResponseBody%EF%BC%9A"><span class="nav-text">@ResponseBody：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%9F%E4%B8%80%E5%93%8D%E5%BA%94%E7%BB%93%E6%9E%9C%EF%BC%9A"><span class="nav-text">统一响应结果：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E5%B1%82%E8%A7%A3%E8%80%A6"><span class="nav-text">分层解耦</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84%EF%BC%9A"><span class="nav-text">三层架构：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E5%B1%82%E8%A7%A3%E8%80%A6%EF%BC%9A"><span class="nav-text">分层解耦：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#IOC%E8%AF%A6%E8%A7%A3%EF%BC%9A"><span class="nav-text">IOC详解：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DI%E8%AF%A6%E8%A7%A3%EF%BC%9A"><span class="nav-text">DI详解：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL"><span class="nav-text">MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DML%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80"><span class="nav-text">DML：数据操作语言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DQL%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80"><span class="nav-text">DQL：数据查询语言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E8%AE%BE%E8%AE%A1%EF%BC%9A"><span class="nav-text">多表设计：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%EF%BC%9A"><span class="nav-text">多表查询：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5%EF%BC%9A"><span class="nav-text">内连接：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5%EF%BC%9A"><span class="nav-text">外连接：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%9A"><span class="nav-text">子查询：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%EF%BC%9A"><span class="nav-text">事务：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%EF%BC%9A"><span class="nav-text">索引：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MyBatis"><span class="nav-text">MyBatis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JDBC%EF%BC%9A"><span class="nav-text">JDBC：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%EF%BC%9A"><span class="nav-text">数据库连接池：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lombok%EF%BC%9A"><span class="nav-text">lombok：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis%E6%93%8D%E4%BD%9C%E6%A1%88%E4%BE%8B%EF%BC%9A"><span class="nav-text">MyBatis操作案例：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#XML%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%EF%BC%9A"><span class="nav-text">XML映射文件：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis%E5%8A%A8%E6%80%81SQL%EF%BC%9A"><span class="nav-text">MyBatis动态SQL：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD%EF%BC%9A"><span class="nav-text">登录功能：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF%EF%BC%9A"><span class="nav-text">会话技术：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JWT%E4%BB%A4%E7%89%8C%EF%BC%9A"><span class="nav-text">JWT令牌：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#JWT-%E7%94%9F%E6%88%90%EF%BC%9A"><span class="nav-text">JWT-生成：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E5%90%8E%E4%B8%8B%E5%8F%91%E4%BB%A4%E7%89%8C%EF%BC%9A"><span class="nav-text">登录后下发令牌：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%87%E6%BB%A4%E5%99%A8Filter%EF%BC%9A"><span class="nav-text">过滤器Filter：</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="王香芋"
      src="/images/1.jpg">
  <p class="site-author-name" itemprop="name">王香芋</p>
  <div class="site-description" itemprop="description">记录</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">5</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Hello-wxy" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Hello-wxy" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:2239848423@qq.com" title="E-Mail → mailto:2239848423@qq.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/05/09/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/1.jpg">
      <meta itemprop="name" content="王香芋">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello-wxy！">
      <meta itemprop="description" content="记录">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="JavaWeb学习笔记 | Hello-wxy！">
      <meta itemprop="description" content="超级全面的JavaWeb学习笔记，包含前端三件套以及后端的maven、http协议、分层解耦、MySQL、Mybatis、JWT、过滤器拦截器、事务管理、AOP、bean管理、SpringBoot等干货笔记！">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          JavaWeb学习笔记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-05-09 22:51:20 / 修改时间：23:01:39" itemprop="dateCreated datePublished" datetime="2024-05-09T22:51:20+08:00">2024-05-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

            <div class="post-description">超级全面的JavaWeb学习笔记，包含前端三件套以及后端的maven、http协议、分层解耦、MySQL、Mybatis、JWT、过滤器拦截器、事务管理、AOP、bean管理、SpringBoot等干货笔记！</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><div style="text-align: center; margin-top: 0vh;">
  <h1>JavaWeb学习笔记</h1>
</div>

<h1 id="一、前端"><a href="#一、前端" class="headerlink" title="一、前端"></a>一、前端</h1><p>0.web网站</p>
<p>前后端分离开发模式工作流程：</p>
<img src="/2024/05/09/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240418221316619.png" alt="image-20240418221316619" style="zoom:50%;">

<p>前端Web开发：HTML、CSS、JavaScript、VUE、Element、Nginx<br>后端Web开发：Maven、SpringBoot、MySQL、SpringBoot Mybatis等</p>
<p>·Web前端网页的三个组成部分：<br>HTML（HyperText Markup Language 超文本标记语言）：负责网页的结构（页面元素和内容）<br>CSS（Cascading Style Sheet 层叠样式表）：负责网页的表现（页面元素的外观、位置等页面样式，如颜色、大小等）<br>JavaScript：负责网页的行为（交互效果）</p>
<h2 id="1-HTML"><a href="#1-HTML" class="headerlink" title="1.HTML"></a>1.HTML</h2><p>HyperText Markup Language 超文本标记语言，超文本：比普通文本更强大，除了文字信息，还可以定义图片、音频、视频等内容；HTML是一种标记语言，由标签构成，&lt; a &gt;展示超链接，&lt; img &gt;展示图片，&lt; video &gt;展示视频。HTML代码在浏览器中直接运行，HTML标签由浏览器解析。</p>
<p><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/">HTML参考手册</a></p>
<p>HTML特点：<br>①不区分大小写<br>②属性值的双引号等同于单引号<br>③语法结构松散（不严格）</p>
<h2 id="2-CSS"><a href="#2-CSS" class="headerlink" title="2.CSS"></a>2.CSS</h2><p>Cascading Style Sheet 层叠样式表，用于控制页面的样式&#x2F;表现。</p>
<p>·CSS的样式引入方法通常使用内嵌样式：在&lt; style&gt;标签中，可以写在页面任何位置，通常约定在head标签中<br>&#96;CSS选择器：元素选择器、类选择器、id选择器</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">	<span class="comment">/*①元素选择器*/</span></span></span><br><span class="line"><span class="language-css">	<span class="selector-tag">h1</span>&#123; <span class="comment">/*元素名称，如p，span，选中所有的该元素*/</span></span></span><br><span class="line"><span class="language-css">		xxx: xxx;</span></span><br><span class="line"><span class="language-css">		xxx: xxx;</span></span><br><span class="line"><span class="language-css">	&#125;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.cls</span>&#123; <span class="comment">/*class属性值，自定，可重复*/</span></span></span><br><span class="line"><span class="language-css">        xxx: xxx;</span></span><br><span class="line"><span class="language-css">        xxx: xxx;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* &lt;h1 class=&quot;cls&quot;&gt; CSS class Selector &lt;/h1&gt; */</span></span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#id</span>&#123; <span class="comment">/*id属性值，自定，不可重复*/</span></span></span><br><span class="line"><span class="language-css">        xxx: xxx；</span></span><br><span class="line"><span class="language-css">        xxx: xxx:</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* &lt;h1 id=&quot;id&quot;&gt; CSS id Selector &lt;/h1&gt; */</span></span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    以上三种选择器，范围越小优先级越高，范围排序：元素 &gt; class &gt; id ,优先级排序： id &gt; class &gt; 元素</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>·CSS中一个重要的模型：盒子模型（页面布局）<br>盒子：页面中的所有元素（标签）都可以看成是一个盒子，由盒子将页面中的元素包含在一个矩形区域内，通过盒子的视角更方便的进行页面布局。<br>盒子模型组成：内容区域（content）、内边距区域（padding）、边框区域（border）、外边距区域（margin）</p>
<img src="/2024/05/09/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240419002937952.png" alt="image-20240419002937952" style="zoom:67%;">

<p>没有语义的布局标签：&lt; div &gt;和&lt; span &gt;<br>特点：<br>    ·div标签：<br>        ·一行只显示一个（独占一行）<br>        ·宽度默认是父元素的宽度，高度默认由内容撑开<br>        ·可以设置宽高（width、height）<br>    ·span标签：<br>        ·一行可以显示多个<br>        ·宽度和高度默认由内容撑开<br>        ·不可以设置宽高</p>
<h2 id="3-JavaScript（JS）"><a href="#3-JavaScript（JS）" class="headerlink" title="3.JavaScript（JS）"></a>3.JavaScript（JS）</h2><p>JS：跨平台、面向对象的脚本语言（无需编译，直接由浏览器解释后就能够运行）。用于控制网页行为，能使网页可交互。JavaScript和Java是完全不同的语言，不论是概念还是设计，但是基础语法相似。</p>
<h3 id="·引入方式："><a href="#·引入方式：" class="headerlink" title="·引入方式："></a>·引入方式：</h3><p>​	内部脚本：将JS代码定在HTML页面中<br>​		JS代码必须位于&lt; script &gt;&lt; &#x2F;script &gt;标签间<br>​		在HTML文档中，可以在任意位置防止任意数量的&lt; script&gt;，一般置于&lt; body &gt;元素的底部，可以改善显示速度。<br>​	外部脚本：将JS代码定在外部JS 文件中，然后引入到HTML页面中。<br>​		外部JS文件中只包含JS代码，不包含&lt; script&gt;标签<br>​		&lt; script&gt;标签不能自闭和，也就是不能这样写：&lt; script src&#x3D;”js&#x2F;demo.js”&#x2F;&gt;</p>
<h3 id="·书写语法："><a href="#·书写语法：" class="headerlink" title="·书写语法："></a>·书写语法：</h3><p>​	区分大小写<br>​	结尾分号可有可无<br>​	注释写法与Java相同<br>​	大括号表示代码块</p>
<h3 id="·变量："><a href="#·变量：" class="headerlink" title="·变量："></a>·变量：</h3><p>​	var关键字声明变量<br>​	JS是弱类型语言，变量可以存放不同类型的值<br>​	命名规则：①字符是任何字母、数字、下划线、或美元符号 ②数字不能开头<br>​	特点：①var的作用域很大，是全局变量 ②可以重复定义<br>​	注意：ECMAScript 6中新增了let关键字，用法类似var，但是所声明的变量只在let关键字所在的代码块中有效，且不允许重复声明。<br>​				新增了const关键字，用来声明一个只读变量，一旦声明就不能改变。</p>
<h3 id="·数据类型："><a href="#·数据类型：" class="headerlink" title="·数据类型："></a>·数据类型：</h3><p>​	javaScript中分为原始类型和引用类型：<br>​		原始类型：·number：数字（整数、小数、NaN(Not a Number)）<br>​		·String：字符串，单双引皆可<br>​		·boolean：布尔<br>​		·null：对象为空<br>​		·undefined：当声明的变量未初始化的时候，该变量的默认值是undefined<br>​	运算符 typeof 可以获取数据类型。（typeof null得到的结果是object）</p>
<h3 id="·运算符："><a href="#·运算符：" class="headerlink" title="·运算符："></a>·运算符：</h3><p>​	除了&#x3D; &#x3D; &#x3D; 与Java不同，其他运算符与Java相同。<br>​	&#x3D; &#x3D; &#x3D;与&#x3D; &#x3D;：&#x3D; &#x3D;会进行类型转换，而&#x3D; &#x3D; &#x3D;不会进行类型转换</p>
<p>在这里复习一下Java中的&#x3D;&#x3D;和equals()的区别：</p>
<p>&#x3D;&#x3D; 对于基本类型和引用类型的作用效果不同：<br>·对于基本数据类型来说， &#x3D;&#x3D; 比较的是值<br>·对于引用数据类型来说，&#x3D;&#x3D; 比较的是对象的内存地址<br>因为Java中只有值传递，所以对于 &#x3D;&#x3D;来说，不管是比较基本数据类型还是引用数据类型的变量，其本质比较的都是值，只是引用类型变量存储的是对象的地址。</p>
<p>equals()不能用于判断基本数据类型的变量，只能用来判断两个对象是否相等。equals()方法存在于Object类中，而Object类是所有类的直接或间接父类，因此所有的类都有equals()方法。<br>equals()使用存在两种情况：<br>·类没有重写equals()方法：通过equals()比较该类的两个对象时，等价于通过&#x3D;&#x3D;比较。<br>·类重写了equals()方法：一般重写来比较两个对象中的属性是否相等，属性相等则返回true。</p>
<h3 id="·类型转换："><a href="#·类型转换：" class="headerlink" title="·类型转换："></a>·类型转换：</h3><p>·字符串转为数字：parseInt将字符串字面值转为数字（从字符串第一位开始，直到非数字），若果字面值不是数字则转为NaN。<br>·其他类型转为boolean：<br>    Number： 0和 NaN 为false，其他均转为true。<br>    String：空字符串为false，其他均转为 true。<br>    Null和undefined：均转为false。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;12&quot;</span>); <span class="comment">//12</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;12A25&quot;</span>); <span class="comment">//12，会将直至非数字前的字面数字转化为数字</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;A25&quot;</span>); <span class="comment">//NaN</span></span><br></pre></td></tr></table></figure>

<h3 id="·函数："><a href="#·函数：" class="headerlink" title="·函数："></a>·函数：</h3><p>通过function关键字来定义函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">functionName</span>(<span class="params">参数<span class="number">1</span>，参数<span class="number">2.</span>..</span>)&#123;</span><br><span class="line">    <span class="comment">//执行代码</span></span><br><span class="line">&#125;</span><br><span class="line">注意：形参不需要类型，因为<span class="title class_">JavaScript</span>时弱类型语言；返回值也不需要定义类型，在函数内部直接使用<span class="keyword">return</span>即可</span><br><span class="line">调用和<span class="title class_">Java</span>类似。</span><br></pre></td></tr></table></figure>

<h3 id="·JS对象："><a href="#·JS对象：" class="headerlink" title="·JS对象："></a>·JS对象：</h3><p>JS对象主要分为三类：基础对象（Array、String、JSON），浏览器对象模型（BOM），文档对象模型（DOM）</p>
<h4 id="Array："><a href="#Array：" class="headerlink" title="Array："></a>Array：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">定义：</span><br><span class="line"><span class="keyword">var</span> 变量名 = <span class="keyword">new</span> <span class="title class_">Array</span>(元素列表)；<span class="comment">// var arr = new Array(1,2,3,4);</span></span><br><span class="line"><span class="keyword">var</span> 变量名 = [元素列表]; <span class="comment">// var arr = [1,2,3,4]; </span></span><br><span class="line">访问：</span><br><span class="line">arr[索引] = 值; <span class="comment">//arr[10] = &quot;hello&quot;;</span></span><br><span class="line">特点：</span><br><span class="line">长度可变，类型可变</span><br><span class="line">属性：</span><br><span class="line">length，长度</span><br><span class="line">方法：</span><br><span class="line">     <span class="title function_">forEach</span>()，遍历数组中的每个有值的元素，并调用一次传入的函数(匿名内部类调用)</span><br><span class="line">     <span class="title function_">push</span>()，将新元素添加到数组的末尾，并返回新的长度</span><br><span class="line">     <span class="title function_">splice</span>().从数组中删除元素</span><br><span class="line">e.<span class="property">g</span>.</span><br><span class="line"><span class="keyword">var</span> arr=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">arr.<span class="title function_">forEach</span>(fnction (e)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">&#125;)<span class="comment">//注意小括号在大括号外，也就是forEach(function(e)&#123;...&#125;)</span></span><br><span class="line"><span class="comment">//function (e)用于接收每次遍历到的元素，每遍历到一个元素就要调用一次整个function。</span></span><br><span class="line"><span class="comment">//ES6中的箭头函数可以简化该函数的编写，形式为：(...)=&gt;&#123;...&#125;。如果需要给箭头函数起名字：var xxx=(...)=&gt;&#123;...&#125;</span></span><br><span class="line">arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">push</span>(<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>);</span><br><span class="line"><span class="comment">//push可添加多个。</span></span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">splice</span>(<span class="number">2</span>,<span class="number">2</span>);<span class="comment">//从第三个元素开始，删除两个元素</span></span><br><span class="line"><span class="comment">//splice的两个参数：第一个参数为起始位置，第二个参数为删除个数</span></span><br></pre></td></tr></table></figure>

<h4 id="String"><a href="#String" class="headerlink" title="String:"></a>String:</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">定义：</span><br><span class="line"><span class="keyword">var</span> 变量名 = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;...&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> 变量名 = <span class="string">&quot;...&quot;</span>;</span><br><span class="line">属性：</span><br><span class="line">length，长度</span><br><span class="line">方法：</span><br><span class="line"><span class="title function_">charAt</span>()，返回指定位置的字符</span><br><span class="line"><span class="title function_">indexOf</span>()，检索字符串</span><br><span class="line"><span class="title function_">trim</span>()，去除字符串两边的空格</span><br><span class="line"><span class="title function_">substring</span>(start,end)，提取字符串中两个指定索引之间的字符(含头不含尾)</span><br><span class="line"></span><br><span class="line">e.<span class="property">g</span>.</span><br><span class="line">str=<span class="string">&quot;Hello String&quot;</span>;</span><br><span class="line">str.<span class="title function_">indexOf</span>(<span class="string">&quot;lo&quot;</span>); <span class="comment">//输出3</span></span><br><span class="line">str.<span class="title function_">substring</span>(<span class="number">0</span>,<span class="number">5</span>); <span class="comment">//输出hello，如果是0-4就不包含o了</span></span><br></pre></td></tr></table></figure>

<h4 id="JSON"><a href="#JSON" class="headerlink" title="JSON:"></a>JSON:</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">JS</span>自定义对象格式：</span><br><span class="line"><span class="keyword">var</span> 对象名 = &#123;</span><br><span class="line">    属性名<span class="number">1</span>：属性<span class="number">1</span>，</span><br><span class="line">    属性名<span class="number">2</span>：属性<span class="number">2</span>，</span><br><span class="line">    函数名称：<span class="keyword">function</span>(<span class="params">形参列表</span>)&#123;&#125;</span><br><span class="line">	<span class="comment">//可简化：函数名称()&#123;&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">·<span class="title class_">JSON</span>字符串转为<span class="variable constant_">JS</span>对象：</span><br><span class="line"><span class="keyword">var</span> userStr = <span class="string">&#x27;&#123;&quot;name&quot; : &quot;Jerry” , &quot;age&quot; : 18 , &quot;addr&quot; : [ &quot;北京&quot;,&quot;上海&quot;,&quot;西安&quot; ] &#125;&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> jsObject = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(userStr);</span><br><span class="line"></span><br><span class="line">·<span class="variable constant_">JS</span>对象转化为<span class="title class_">JSON</span>字符串：</span><br><span class="line"><span class="keyword">var</span> jsonStr = <span class="title class_">JSON</span>。<span class="title function_">stringify</span>(jsObject);</span><br></pre></td></tr></table></figure>

<p>JSON: JavaScript Object Notation，JavaScript对象标记法，JSON是通过JavaScript对象标记法书写的文本。</p>
<p>JSON的对象定义有一点特殊：需要使用双引号将属性名围起来。</p>
<p>由于JSON语法简单，层次结构鲜明，现多用于作为数据载体，在网络中进行数据传输。</p>
<p>对于JSON的属性：如果是数组则需要放在方括号内[]，如果是对象则需要放在花括号内{}。</p>
<h4 id="BOM"><a href="#BOM" class="headerlink" title="BOM:"></a>BOM:</h4><p>Browser Object Model 浏览器对象模型，允许JavaScript于浏览器对话，JavaScript将浏览器的各个组成部分封装为对象<br>·组成：<br>    Window：浏览器窗口对象<br>    Navigator：浏览器对象<br>    Screen：屏幕对象<br>    History：历史记录对象<br>    Location：地址栏对象<br>Location中有一个常用的属性：herf：设置或返回完整的url<br>window.location.herf &#x3D; “https:&#x2F;&#x2F;…”，设置后会直接跳转到当前所设置的herf网页,（window可省略）</p>
<h4 id="DOM："><a href="#DOM：" class="headerlink" title="DOM："></a>DOM：</h4><p>Document Object Model 文档对象模型。<br>·组成：<br>    Document：整个文档对象<br>    Element：元素对象<br>    Attribute：属性对象<br>    Text：文本对象<br>    Comment：注释对象<br>DOM会将HTML文件转化为DOM树。JavaScript通过DOM，就能够对HTML进行操作，例如改变HTML元素内容、样式、对HTML DOM事件作出反应、添加和删除HTML元素等。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">如何获取到指定的元素对象：</span><br><span class="line">·html中的Element对象可以通过Document对象获取，Document对象是通过window对象获取的。</span><br><span class="line">Document对象提供了四种方式获取Element元素对象的函数：</span><br><span class="line">1.根据id属性值获取，返回单个Element对象</span><br><span class="line">var h1 = document.getElementById(&#x27;h1&#x27;);</span><br><span class="line">2.根据标签名称获取，返回Element对象数组</span><br><span class="line">var divs = document.getElementsByTagName(&#x27;div&#x27;);</span><br><span class="line">3.根据name属性值获取，返回Elment对象数组</span><br><span class="line">var names=document.getElementsByName(&#x27;na&#x27;);</span><br><span class="line">4.根据class属性值获取，返回Elment对象数组</span><br><span class="line">var clss=document.getElementsByClassName(&#x27;cls&#x27;);</span><br><span class="line"></span><br><span class="line">e.g.</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;h1&quot;</span> <span class="attr">src</span>=<span class="string">&quot;img/pic.gif&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cls&quot;</span>&gt;</span> hello <span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cls&quot;</span>&gt;</span> world <span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">typr</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span> 电影</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">typr</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span> 旅游</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">typr</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span> 游戏</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    获取element元素：</span></span><br><span class="line"><span class="language-javascript">    <span class="number">1.</span>根据id获取</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> img = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;h1&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="number">2.</span>根据标签获取</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> divs = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;divs.<span class="property">length</span>;i++)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(divs[i]);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="number">3.</span>根据name属性获取</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> hobbys=<span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&#x27;hobby&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;hobbys.<span class="property">length</span>;i++)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(hobbys[i]);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="number">4.</span>根据<span class="keyword">class</span>属性获取</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> clss=<span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;cls&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;clss.<span class="property">length</span>;i++)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(clss[i]);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="JS事件监听"><a href="#JS事件监听" class="headerlink" title="JS事件监听"></a>JS事件监听</h3><p>·事件：HTML事件是发生在HTML元素上的事情，比如按钮被点击、按下键盘<br>事件监听：JavaScript可以在事件被侦测倒是执行代码。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">事件绑定：</span><br><span class="line">方式一：通过HTML标签中的事件属性进行绑定</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;on()&quot;</span> <span class="attr">value</span>=<span class="string">&quot;按钮1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">on</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;我被点击了！&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">方式二：通过DOM元素属性绑定</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;按钮2&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>).<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;我被点击了！&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">常见事件：</span><br><span class="line">onclick 鼠标单击事件</span><br><span class="line">onblur 元素失去焦点</span><br><span class="line">onfocs 元素获得焦点</span><br><span class="line">onload 某个页面或图像被完成加载</span><br><span class="line">onsubmit 当表单提交时触发该事件</span><br><span class="line">onkeydown 某个键盘的按键被按下</span><br><span class="line">onmouseover 鼠标被移动到某元素上</span><br><span class="line">onmouseout 鼠标从某元素移开</span><br></pre></td></tr></table></figure>

<h1 id="二、后端"><a href="#二、后端" class="headerlink" title="二、后端"></a>二、后端</h1><h2 id="1-maven"><a href="#1-maven" class="headerlink" title="1.maven"></a>1.maven</h2><p>Apache旗下的开源项目，是一款用于管理和构建Java项目工具。</p>
<p>·maven作用：<br>    ①依赖管理：方便快捷的管理项目依赖的资源（jar包），避免版本冲突。<br>    ②统一项目结构：提供标准、统一的项目结构。<br>    ③项目构建：标准跨平台（Windows、Linux、MacOS）的自动化项目构建方式</p>
<p><a target="_blank" rel="noopener" href="https://mvnrepository.com/">依赖坐标信息查询官网</a></p>
<p>·依赖传递性：<br>    直接依赖：当前项目中通过依赖配置建立的依赖关系<br>    间接依赖：被依赖的资源如果依赖其他资源，当前项目简介依赖其他资源</p>
<p>·排除依赖：指主动断开依赖的资源，被排除的资源无需指定版本。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">projectA----&gt;projectB----&gt;.jar   A依赖B，B依赖一个jar包</span><br><span class="line">若想排除对这个jar包的依赖：</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.wxy<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifacId</span>&gt;</span>maven-projectB<span class="tag">&lt;/<span class="name">artifacId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifacId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifacId</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 排除依赖无需版本号 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>·依赖范围：<br>依赖的jar包默认情况下可以在任何地方使用，可以通过&lt; scope&gt;…&lt; &#x2F;scope&gt;设置其作用范围。<br>作用范围：<br>    主程序有效（main文件夹内）<br>    测试程序范围有效（test文件夹范围内）<br>    是否参与打包运行（package指令范围内）</p>
<table>
<thead>
<tr>
<th>scope值</th>
<th>主程序</th>
<th>测试程序</th>
<th>打包（运行）</th>
<th>范例</th>
</tr>
</thead>
<tbody><tr>
<td>compile（默认）</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>log4j</td>
</tr>
<tr>
<td>test</td>
<td>-</td>
<td>Y</td>
<td>-</td>
<td>junit</td>
</tr>
<tr>
<td>provided</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>servlet-api</td>
</tr>
<tr>
<td>runtime</td>
<td>-</td>
<td>Y</td>
<td>Y</td>
<td>jdbc驱动</td>
</tr>
</tbody></table>
<h2 id="2-HTTP协议"><a href="#2-HTTP协议" class="headerlink" title="2.HTTP协议"></a>2.HTTP协议</h2><p>超文本传输协议，规定了浏览器和服务器之间数据传输的规则。</p>
<h3 id="·特点："><a href="#·特点：" class="headerlink" title="·特点："></a>·特点：</h3><p>1.基于TCP协议：面向连接，安全<br>2.基于请求-响应模型：一次请求对应一次响应<br>3.HTTP协议是无状态的协议：对于事务处理没有记忆能力。每次请求-响应都是独立的。<br>    缺点：多次请求间不能共享数据<br>    优点：速度快</p>
<h3 id="·请求格式："><a href="#·请求格式：" class="headerlink" title="·请求格式："></a>·请求格式：</h3><p>首行（请求行）：请求方式、资源路径、协议版本号<br>请求头：第二行开始，格式key：value<br>请求体：对于POST请求而言，body用来存放请求参数（请求体和请求头之间有一行空行）</p>
<img src="https://img-blog.csdnimg.cn/img_convert/c3812d21ce1684d886bb62415887ece0.png" alt="image-20220303222646809" style="zoom:67%;">

<p>GET请求方法：</p>
<ul>
<li>首行里面的第一个部分就是 GET</li>
<li>URL 里面的 query string 可以为空，也可以不为空</li>
<li>GET 请求的 header 有若干个键值对结构</li>
<li>GET 请求的 body 一般是空的</li>
</ul>
<p>POST请求方法：</p>
<ul>
<li>首行第一个部分就是 POST</li>
<li>URL 里面的 query string 一般是空的</li>
<li>POST 请求的 header 里面有若干个键值对</li>
<li>POST 请求的 body 一般不为空（body 的具体数据格式，由 header 中的 Content-Type 来描述；body 的具体数据长度，由 header 中的 Content-Length 来描述</li>
</ul>
<p>GET和POST的区别：</p>
<p>GET 和 POST 其实没有本质区别，使用 GET 的场景完全可以使用 POST 代替，使用 POST 的场景一样可以使用 GET 代替。但是在具体的使用上，还是存在一些细节的区别</p>
<ul>
<li>GET 习惯上会把客户端的数据通过 query string （请求行）来传输（body 部分是空的）(例如GET &#x2F;brand&#x2F;findALL？name&#x3D;OPPO&amp;status&#x3D;1 HTTP&#x2F;1.1)；POST 习惯上会把客户端的数据通过 body 来传输（query string 部分是空的）</li>
<li>GET 习惯上用于从服务器获取数据；POST 习惯上是客户端给服务器提交数据</li>
<li>一般情况，程序员会把 GET 请求的处理，实现成“幂等”的；对于 POST 请求的处理，不要求实现成“幂等”</li>
<li>GET 请求可以被缓存，可以被浏览器保存到收藏夹中；POST 请求不能被缓存</li>
</ul>
<p>“幂等”：</p>
<p>一个 HTTP 方法是幂等的，指的是同样的请求被执行一次与连续执行多次的效果是一样的，服务器的状态也是一样的。换句话说，幂等的方法不应该具有副作用。</p>
<p>比如我们去抢购一件物品，如果我们已经抢到了要进行下单，由于很多人都在抢购，所以下单后，我们发现好像没有什么反应，因此我们又不断的点机下单。如果最终我们只需要付一件产品的钱，就是幂等的，如果要支付N件产品的钱，就不是幂等的。GET、HEAD、PUT 和 DELETE 等方法是幂等的，POST不是幂等的。</p>
<h3 id="·响应格式："><a href="#·响应格式：" class="headerlink" title="·响应格式："></a>·响应格式：</h3><p>首行（响应行）：协议、状态码、描述<br>响应头：格式key:value<br>响应体：最后一部分，存放响应数据，与响应头之间有一行空行</p>
<img src="https://img-blog.csdnimg.cn/img_convert/234b9c09798e981d31f81fba44d0fffa.png" alt="image-20220303224536778" style="zoom:67%;">

<p>状态码：</p>
<table>
<thead>
<tr>
<th>状态码</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1xx</td>
<td>响应中-临时状态码，表示请求已经接受，告诉客户端应该继续请求或者如果它已经完成则忽略它。</td>
</tr>
<tr>
<td>2xx</td>
<td>成功-表示请求已经成功被接受，处理已完成。</td>
</tr>
<tr>
<td>3xx</td>
<td>重定向-重定向到其他地方；让客户端再发起一次请求以完成整个处理。</td>
</tr>
<tr>
<td>4xx</td>
<td>客户端错误-处理发生错误，责任在客户端。如：请求了不存在的资源、客户端未被授权、禁止访问等。</td>
</tr>
<tr>
<td>5xx</td>
<td>服务器错误-处理发生错误，责任在服务端。程序抛出异常</td>
</tr>
</tbody></table>
<p>常见响应状态码：</p>
<table>
<thead>
<tr>
<th>status</th>
<th>type</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>200</td>
<td>OK</td>
<td>客户端请求成功，即处理成功。</td>
</tr>
<tr>
<td>302</td>
<td>Found</td>
<td>指示所请求的资源已移动到由Location响应头给定的URL，浏览器会自动重新访问到这个页面</td>
</tr>
<tr>
<td>304</td>
<td>Not Modified给v吧           76</td>
<td>告诉客户端，你请求的资源至上次取得后，服务端并未修改，直接用你本地缓存吧。隐式重定向</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>客户端请求有语法错误，不能被服务器所理解</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>服务器收到请求，但是拒绝提供服务，比如：没有权限访问相关资源</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>请求资源不存在，一般是URL输入有误，或者网站资源被删除了</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed</td>
<td>请求方式有误，比如应该用GET请求方式的资源，用了POST</td>
</tr>
<tr>
<td>428</td>
<td>Precondition Required</td>
<td>服务器要求有条件的请求，告诉客户端想要访问该资源，必须携带特定的请求头</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests</td>
<td>指示用户在给定的时间内发送了太多请求（限速），配合Retry-After响应头一起使用</td>
</tr>
<tr>
<td>431</td>
<td>Request Header Fields Too Large</td>
<td>请求头太大，服务器不愿处理请求，因为它的头部字段太大。请求可以在减少请求头域的大小后重新提交</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
<td>服务器发生不可预期的错误。服务器出异常，看日志</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable</td>
<td>服务器尚未准备好处理请求，服务器刚刚启动，还未初始化好</td>
</tr>
</tbody></table>
<p>响应键值对：</p>
<table>
<thead>
<tr>
<th>key</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>Content-Type</td>
<td>表示该响应内容的类型，例如text&#x2F;html，application&#x2F;json</td>
</tr>
<tr>
<td>Content-Length</td>
<td>表示该响应内容的长度（字节数）</td>
</tr>
<tr>
<td>Content-Encoding</td>
<td>表示该响应压缩算法，例如gzip</td>
</tr>
<tr>
<td>Cache-Control</td>
<td>指示客户端如何缓存，例如max-age&#x3D;300表示可以最多缓存300秒</td>
</tr>
<tr>
<td>Set-Cookie</td>
<td>告诉浏览器为当前页面所在的域设置cookie</td>
</tr>
</tbody></table>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_51367845/article/details/123313047?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171377123816800213078149%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=171377123816800213078149&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~top_positive~default-1-123313047-null-null.nonecase&utm_term=http%E5%8D%8F%E8%AE%AE&spm=1018.2226.3001.4450">HTTP协议详解</a></p>
<h2 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h2><p>Web服务器：一个软件程序，对HTTP协议的操作进行封装，使得程序员不必直接对协议进行操作，让Web开发更加便捷。<br>主要功能：提供网上信息浏览服务（http协议的解析）Tomcat也被称为Web容器、Servlet容器，Servlet程序需要依赖于Tomcat才能运行。<br>Tomcat已经内置在了IDEA中。</p>
<h2 id="请求响应"><a href="#请求响应" class="headerlink" title="请求响应"></a>请求响应</h2><h3 id="请求："><a href="#请求：" class="headerlink" title="请求："></a>请求：</h3><h4 id="简单参数："><a href="#简单参数：" class="headerlink" title="简单参数："></a>简单参数：</h4><p>参数名与形参变量名相同，定义形参即可接收参数。会自动进行类型转换</p>
<h4 id="实体参数："><a href="#实体参数：" class="headerlink" title="实体参数："></a>实体参数：</h4><p>简单实体对象：请求参数与形参对象属性名相同，定义POJO接收即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GET请求 http://localhost8080/simplePojo?user=wang&amp;age=18</span></span><br><span class="line"><span class="comment">//在pojo包下创建User类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//生成相应的get、set方法以及toString方法</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span>+</span><br><span class="line">            <span class="string">&quot;name=&#x27;&quot;</span>+name+<span class="string">&#x27;\&#x27;&#x27;</span>+</span><br><span class="line">            <span class="string">&quot;,age=&quot;</span>+age+</span><br><span class="line">            <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在Controller中定义</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/simplePojo&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">simplePojo</span><span class="params">(User user)</span>&#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*前端发送请求成功后控制台显示：User&#123;name=&#x27;wang&#x27;,age=18&#125;*/</span></span><br></pre></td></tr></table></figure>

<p>复杂实体对象：请求参数名与形参对象属性名相同，按照对象层次结构关系即可接收嵌套POJO属性参数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GET请求 http://localhost8080/simplePojo?user=wang&amp;age=18&amp;address.province=江苏&amp;address.city=南京</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String address；</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//生成相应的get、set方法以及toString方法</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String province;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//生成相应的get、set方法以及toString方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在Controller中定义</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/complexPojo&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">complexPojo</span><span class="params">(User user)</span>&#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*前端发送请求成功后控制台显示：User&#123;name=&#x27;wang&#x27;,age=18,address=Address&#123;province=&#x27;江苏&#x27;，city=&#x27;南京&#x27;&#125;&#125;*/</span></span><br></pre></td></tr></table></figure>

<h4 id="数组集合参数："><a href="#数组集合参数：" class="headerlink" title="数组集合参数："></a>数组集合参数：</h4><p>数组参数：请求参数名与形参数组名称相同且请求参数为多个，定义数组类型形参即可接收参数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GET请求 http://localhost8080/arrayParam?hobby=game&amp;hobby=java&amp;hobby=sing</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/arrayParam&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">complexPojo</span><span class="params">(Sting[] hobby)</span>&#123;</span><br><span class="line">    System.out.println(Arrays.toString(hobby));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*前端发送请求成功后控制台显示：[game, java, sing]*/</span></span><br></pre></td></tr></table></figure>

<p>集合参数：请求参数名与形参集合名称相同且请求参数为多个，@RequestParam绑定参数关系。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GET请求 http://localhost8080/arrayParam?hobby=game&amp;hobby=java&amp;hobby=sing</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">listParam</span><span class="params">(<span class="meta">@RequestParam</span> List&lt;String&gt; hobby)</span>&#123;</span><br><span class="line">    System.out.println(Arrays.toString(hobby));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*前端发送请求成功后控制台显示：[game, java, sing]*/</span></span><br></pre></td></tr></table></figure>

<h4 id="日期参数："><a href="#日期参数：" class="headerlink" title="日期参数："></a>日期参数：</h4><p>日期参数：使用@DateTimeFormat注解完成日期参数格式转换</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GET请求 http://localhost8080/DateParam?updateTime=2024-1-1 10:15:23</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/DateParam&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">DateParam</span><span class="params">(<span class="meta">@DateTimeFormat(pattern=&quot;yyyy-MM-dd HH:mm:ss&quot;)</span> LocalDateTime updateTime)</span>&#123;</span><br><span class="line">    System.out.println(updateTime);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*前端发送请求成功后控制台显示：2024-1-1T10:15:23*/</span></span><br></pre></td></tr></table></figure>

<h4 id="Json参数："><a href="#Json参数：" class="headerlink" title="Json参数："></a>Json参数：</h4><p>JSON参数：JSON数据键名与形参对象属性名相同，定义POJO类型形参即可接收参数，需要使用@RequestBody标识</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//POST请求 http://localhost8080/jsonParam</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String address；</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//生成相应的get、set方法以及toString方法</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String province;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//生成相应的get、set方法以及toString方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/jsonParam&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">jsonParam</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*前端发送请求成功后控制台显示：User&#123;name=&#x27;wang&#x27;,age=18,address=Address&#123;province=&#x27;江苏&#x27;，city=&#x27;南京&#x27;&#125;&#125;*/</span></span><br></pre></td></tr></table></figure>

<h4 id="路径参数："><a href="#路径参数：" class="headerlink" title="路径参数："></a>路径参数：</h4><p>路径参数：通过请求URL直接传递参数，使用{…}来标识该路径参数，需要使用@PathVariable获取路径参数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GET请求 http://localhost8080/path/1</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/path/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">pathParam</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">    System.out.println(id);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*前端发送请求成功后控制台显示：1*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//可以传递多个：</span></span><br><span class="line"><span class="comment">//GET请求 http://localhost8080/path/1/wang</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/path/&#123;id&#125;/&#123;name&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">pathParam</span><span class="params">(<span class="meta">@PathVariable</span> Integer id,(<span class="meta">@PathVariable</span> String name)</span>&#123;</span><br><span class="line">    System.out.println(id);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="响应："><a href="#响应：" class="headerlink" title="响应："></a>响应：</h3><h4 id="ResponseBody："><a href="#ResponseBody：" class="headerlink" title="@ResponseBody："></a>@ResponseBody：</h4><p>类型：方法注解、类注解<br>位置：Controller方法&#x2F;类上<br>作用：将方法返回值直接响应，若果返回值类型是 实体对象&#x2F;集合，将会转换为JSON格式响应<br>说明：@RestController&#x3D;@Controller+@ResponseBody；</p>
<h4 id="统一响应结果："><a href="#统一响应结果：" class="headerlink" title="统一响应结果："></a>统一响应结果：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span>&#123;</span><br><span class="line">    <span class="comment">//响应码，1代表成功，0代表失败</span></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="comment">//提示信息</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="comment">//返回数据</span></span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//所有的返回都变为：return Result.success(code,msg,data);[result中的方法]</span></span><br></pre></td></tr></table></figure>

<h2 id="分层解耦"><a href="#分层解耦" class="headerlink" title="分层解耦"></a>分层解耦</h2><h3 id="三层架构："><a href="#三层架构：" class="headerlink" title="三层架构："></a>三层架构：</h3><p>Controller：控制层，接收前端发送的请求，对请求进行处理，并响应数据<br>service：业务逻辑层，处理具体的业务逻辑<br>Dao：数据访问层（Data Access Object）（持久层），负责数据访问操作，包括数据的增删改查。</p>
<h3 id="分层解耦："><a href="#分层解耦：" class="headerlink" title="分层解耦："></a>分层解耦：</h3><p>·内聚：软件中各个功能模块内部的功能联系。<br>·耦合：衡量软件中各个层&#x2F;模块之间的依赖、关联的程度。</p>
<p>在未进行分层解耦时，Controller层想要调用Service层的具体实现方法需要在私有成员中new一个Service对象，假如要改用另一个Service接口实现类的话就必须在Controller层中修改new的对象的名称，这样就存在了耦合。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Controller</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpController</span>&#123;</span><br><span class="line">    priavate <span class="type">EmpService</span> <span class="variable">empService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EmpServiceA</span>();<span class="comment">//未实现分层解耦时需要new实现类</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/listEmp&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">list</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Emp&gt; empList = empService.listEmp();</span><br><span class="line">        <span class="keyword">return</span> Result.success(empList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Service接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmpService</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;EMP&gt; <span class="title function_">listEmp</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//service.impl的包下创建接口实现类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpServiceA</span> <span class="keyword">implements</span> <span class="title class_">EmpService</span>&#123;</span><br><span class="line">    <span class="comment">//Service的实现中要调用Dao层的方法，因此需要</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">EmpDao</span> <span class="variable">empDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EmpDaoA</span>();</span><br><span class="line">    <span class="keyword">public</span> List&lt;EMP&gt; <span class="title function_">listEmp</span><span class="params">()</span>&#123;</span><br><span class="line">        ...;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//另一个EmpService接口的不同实现类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpServiceB</span> <span class="keyword">implements</span> <span class="title class_">EmpService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">EmpDao</span> <span class="variable">empDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EmpDaoA</span>();</span><br><span class="line">    <span class="keyword">public</span> List&lt;EMP&gt; <span class="title function_">listEmp</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//另一种实现方式</span></span><br><span class="line">        ...;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因此要想尽量避免耦合，我们就不能在Controller层new Service层的对象，也不能在Service层new Dao层的对象。在这里我们使用一个“容器”，容器是用来装东西的，在这里我们用来装的是Service接口的具体实现类，当我们需要EmpServiceA作为实现的时候，我们就把EmpServiceA放进容器（需要EmpServiceB的话就把EmpServiceB放进容器），当Controller需要一个EmpService对象的时候就在容器中找到这个对象，这样就能避免耦合。</p>
<p>引入两个spring重要的三个概念：</p>
<p><strong>控制反转：</strong>Inversion Of Control，简称IOC。对象的创建控制权由程序自身转移到外部（容器），这种思想成为控制反转。</p>
<p><strong>依赖注入：</strong>Dependency Injection，简称DI。容器为应用程序提供运行时所依赖的资源，称之为依赖注入</p>
<p><strong>Bean对象：</strong>IOC容器中创建、管理的对象，称为bean。</p>
<p>使用步骤：<br>①Service层及Dao层的实现类交给IOC容器管理。<br>②为Controller及Service注入运行时依赖的对象<br>③运行测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Controller</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpController</span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//依赖注入：运行时IOC容器会提供该类型的bean对象，并赋值给该对象</span></span><br><span class="line">    priavate EmpService empService;<span class="comment">//实现分层解耦不需要new实现类，只需进行依赖注入</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/listEmp&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">list</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Emp&gt; empList = empService.listEmp();</span><br><span class="line">        <span class="keyword">return</span> Result.success(empList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//若是想要改变当前所应用的Service层的实现方法，改为EmpServiceB，只需将EmpServiceA中的@Component注解删除，在EmpServiceB中添加即可。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Service接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmpService</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;EMP&gt; <span class="title function_">listEmp</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//service.impl的包下创建接口实现类</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//将当前类交给IOC容器管理，成为IOC容器中的bean</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpServiceA</span> <span class="keyword">implements</span> <span class="title class_">EmpService</span>&#123;</span><br><span class="line">    <span class="comment">//Service的实现中要调用Dao层的方法，因此需要</span></span><br><span class="line">    <span class="meta">@Autowired</span>  <span class="comment">//依赖注入：运行时IOC容器会提供该类型的bean对象，并赋值给该对象</span></span><br><span class="line">    <span class="keyword">private</span> EmpDao empDao ;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> List&lt;EMP&gt; <span class="title function_">listEmp</span><span class="params">()</span>&#123;</span><br><span class="line">        ...;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Dao层实现类</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//将当前类交给IOC容器管理，成为IOC容器中的bean</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpDaoA</span> <span class="keyword">implements</span> <span class="title class_">EmpDao</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">listEmp</span><span class="params">()</span>&#123;</span><br><span class="line">        ...;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="IOC详解："><a href="#IOC详解：" class="headerlink" title="IOC详解："></a>IOC详解：</h4><p>@Component衍生注解：</p>
<table>
<thead>
<tr>
<th>注解</th>
<th>说明</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>@Component</td>
<td>声明bean的基础注解</td>
<td>不属于以下三类时，用此注解</td>
</tr>
<tr>
<td>@Controller</td>
<td>@Component衍生注解</td>
<td>标注在控制类上</td>
</tr>
<tr>
<td>@Service</td>
<td>@Component衍生注解</td>
<td>标注在业务类上</td>
</tr>
<tr>
<td>@Repository</td>
<td>@Component衍生注解</td>
<td>标注在数据访问类上（由于与Mybatis整合，用的少）</td>
</tr>
</tbody></table>
<p>通常@Controller是不用加的，因为在响应体的处理时加入了一个@RestController的注解，而@RestController &#x3D; @Controller + @ResponseBody，因此无需再添加@Controller了</p>
<p>声明bean的时候，可以通过value属性指定bean的名字，如果没有指定，默认为类名首字母小写。</p>
<p><strong>Bean组件扫描：</strong><br>前面声明bean的四大注解，要想生效还需要被组件扫描注解@ComponentScan扫描。<br>@ComponentScan注解随谈没有显示配置，但是实际上已经包含在了启动类声明注解@SpringBootApplication中，默认扫描的范围是<strong>启动类</strong>所在包及其子包。</p>
<h4 id="DI详解："><a href="#DI详解：" class="headerlink" title="DI详解："></a>DI详解：</h4><p>@Autowired注解默认是按照类型进行，若果存在多个相同类型的bean会报错。<br>解决方案：<br>Ⅰ.@Primary：在其中一个@Component注解（包括衍生注解）前加入即可<br>Ⅱ.@Qualifier：在@Autowired注解后方加上@Qualifier(“empServiceA [bean的名称]”)，注意指定的bean一般为索要注入的实现类的首字母小写。<br>Ⅲ.@Resourse：使用@Resourse(name&#x3D;”empServiceB [bean的名称]”)</p>
<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><h3 id="DML：数据操作语言"><a href="#DML：数据操作语言" class="headerlink" title="DML：数据操作语言"></a>DML：数据操作语言</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加：INSERT</span></span><br><span class="line">指定字段添加数据：insert into 表名(字段<span class="number">1</span>，字段<span class="number">2</span>) values(值<span class="number">1</span>，值<span class="number">2</span>);</span><br><span class="line">全部字段添加数据：insert into 表名 values(值<span class="number">1</span>，值<span class="number">2.</span>..);</span><br><span class="line">批量添加数据(指定字段)：insert into 表名(字段<span class="number">1</span>，字段<span class="number">2</span>) values(值<span class="number">1</span>，值<span class="number">2</span>),(值<span class="number">1</span>，值<span class="number">2</span>);<span class="comment">//批量添加时values之间用逗号分隔</span></span><br><span class="line">批量添加数据(全部字段)：insert into 表名 values(值<span class="number">1</span>，值<span class="number">2.</span>..),(值<span class="number">1</span>，值<span class="number">2.</span>..);</span><br><span class="line"><span class="comment">//字符串和日期类型数据应该包含在引号中。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//更新：UPDATE</span></span><br><span class="line">修改数据：update 表名 set 字段名<span class="number">1</span>=值<span class="number">1</span>，字段名<span class="number">2</span>=值<span class="number">2</span>，...[where 条件];</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除：DELETE</span></span><br><span class="line">删除数据：delete from 表名 [where 条件];</span><br><span class="line"><span class="comment">//delete语句不能删除某一个字段的值，如果要操作可以使用update，将该字段的值设置为null。</span></span><br></pre></td></tr></table></figure>

<h3 id="DQL：数据查询语言"><a href="#DQL：数据查询语言" class="headerlink" title="DQL：数据查询语言"></a>DQL：数据查询语言</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">select 	 字段列表（返回哪些字段）</span><br><span class="line">from 	 表名列表（查询哪些表）</span><br><span class="line">where 	 条件列表（条件查询）</span><br><span class="line">group by 分组字段列表（分组查询）</span><br><span class="line">having 	 分组后条件列表（分组查询）</span><br><span class="line">order by 排序字段列表（排序查询）</span><br><span class="line">limit 	 分页参数（分页查询）</span><br></pre></td></tr></table></figure>

<p>基本查询：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">查询多个字段：select 字段1，字段2，字段3 from 表名;</span><br><span class="line">查询所有字段（通配符）：select * from 表名;	（不推荐此方法，建议全部罗列，此方法不直观且性能低）</span><br><span class="line">设置别名：select 字段1 [as] 别名1 from 表名;（as可省略，若需要在别名中加入空格或/，需要在别名外加单或双引号）</span><br><span class="line">去重：select distinct 字段列表 from 表名;</span><br></pre></td></tr></table></figure>

<p>条件查询：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">条件查询：select 字段列表 from 表名 where 条件列表;</span><br><span class="line">模糊匹配：</span><br><span class="line">select * from tb where name like &#x27;__&#x27;;//查询名字为两个字的，使用两个下划线，一个下划线代表一个字符。</span><br><span class="line">select * from tb where name like &#x27;王%&#x27;;//查询姓王的员工，%可以匹配任意个字符。</span><br><span class="line">·查旬空值使用 is null而不能使用=null</span><br></pre></td></tr></table></figure>

<p>聚合函数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">聚合函数：将一列作为整体，进行纵向计算。（不对null值进行字段）</span><br><span class="line">语法：select 聚合函数(字段列表) from 表名;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody><tr>
<td>count</td>
<td>统计数量</td>
<td align="left">A.select count(id) from tb; &#x2F;&#x2F;count(字段)<br>B.select count(1) from tb; &#x2F;&#x2F;count(常量)<br>C.select count(<em>) from tb; &#x2F;&#x2F;count(</em>) 推荐使用</td>
</tr>
<tr>
<td>max</td>
<td>最大值</td>
<td align="left">select min(date) from tb; &#x2F;&#x2F;最早时间</td>
</tr>
<tr>
<td>min</td>
<td>最小值</td>
<td align="left">select max(date) from tb; &#x2F;&#x2F;最迟时间</td>
</tr>
<tr>
<td>avg</td>
<td>平均值</td>
<td align="left">select avg(age) from tb;</td>
</tr>
<tr>
<td>sum</td>
<td>求和</td>
<td align="left">select sum(age) from tb;</td>
</tr>
</tbody></table>
<p>分组查询：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">分组查询：select 字段列表 from 表名 [where 条件] group by 分组字段名 [having 分组后过滤条件];</span><br><span class="line"></span><br><span class="line">//根据性别分组，统计男性和女性的数量：</span><br><span class="line">select gender,count(*) from tb group by geneder; //select了gender和count(*)那么返回的表格就有这两列</span><br><span class="line"></span><br><span class="line">·如果想将代表男女的1和2转换成男性和女性，可以使用if()流程控制函数：if(条件表达式,true取值,false取值)</span><br><span class="line">select if(gender=1,&#x27;男性&#x27;,&#x27;女性&#x27;) 性别,count(*) from tb group by geneder;这样结果就会显示男性和女性且列名为性别</span><br><span class="line"></span><br><span class="line">·如果不止有两个呢？使用：case 表达式 when 值1 then 结果1 when 值2 then 结果2... else... end</span><br><span class="line">select </span><br><span class="line">	(case job when 1 then &#x27;主管&#x27; when 2 then &#x27;HR&#x27; when 3 then &#x27;策划&#x27; else &#x27;未分配职位&#x27; end) 职位.</span><br><span class="line">	count(*)</span><br><span class="line">from tb group by job;</span><br><span class="line"></span><br><span class="line">//先查询入职时间在&#x27;2020-01-01&#x27;(包含)以前的员工，并对结果根据职位进行分组，获取员工数量大于等于2的职位</span><br><span class="line">select job,count(*) from tb where entrydate&lt;=&#x27;2020-01-01&#x27; group by job having count(*) &gt;= 2;</span><br><span class="line"></span><br><span class="line">where和having的区别：</span><br><span class="line">1.执行时机不同：where十分祖谦进行过滤，不满足where条件不参与分组；而having是分组后对结果进行过滤</span><br><span class="line">2.判断条件不同：where不能对聚合函数进行判断，而having可以</span><br><span class="line"></span><br><span class="line">·分组之后，查询的字段一般是聚合函数和分组字段，查询其他字段无意义</span><br><span class="line">·执行顺序：where&gt;聚合函数&gt;having</span><br></pre></td></tr></table></figure>

<p>排序查询：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">分组查询：select 字段列表 from 表名 [where 条件列表][group by 分组字段] order by 字段1 排序方式1，字段2 排序方式2...;</span><br><span class="line">排序方式：ASC升序(默认)，DESC降序；</span><br><span class="line"></span><br><span class="line">//根据入职时间对公司员工进行升序排序，如果入职时间相同，再按照更新时间进行降序排序</span><br><span class="line">select * from tb order by entrydate ，update_time desc;</span><br><span class="line">·只有当第一个排序字段相同时，第二个排序字段才会生效。</span><br></pre></td></tr></table></figure>

<p>分页查询：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">分页查询：select 字段列表 from 表名 limit 起始索引，查询记录数;</span><br><span class="line">起始从0开始，起始索引 = （页码—1）*每页展示记录数</span><br><span class="line">·分页查询时数据库方言，不同的数据库有不同的实现，MlSQL是LIMIT</span><br><span class="line">·如果查询的是第一页的数据，起始索引可以省略，直接简写limit 10;</span><br></pre></td></tr></table></figure>

<h3 id="多表设计："><a href="#多表设计：" class="headerlink" title="多表设计："></a>多表设计：</h3><p>表关系：<br>一对多（多对一）、多对多、一对一</p>
<p>物理外键缺点：<br>1.影响增删改效率（需要检查外键关系）。<br>2.进用于单节点数据库，不适用于分布式、集群场景。<br>3.容易引发数据库的死锁问题，消耗性能。</p>
<p>多对多：<br>例：学生与课程<br>实现：建立第三张中间表，中间表至少包含两个外键，分别关联两方主键。</p>
<p>一对一：<br>多用于单表拆分，将一张表的基础字段放在一张表中，其他字段放在另一表中，以提升操作效率<br>例如用户与身份证信息的关系，假设对用户基本信息的查询频率特别高，而对身份证信息查询频率低，为了提高查询效率就可以将基本信息和身份证信息拆分成两个表。</p>
<h3 id="多表查询："><a href="#多表查询：" class="headerlink" title="多表查询："></a>多表查询：</h3><p>连接查询：<br>·内连接：查询A、B交集部分数据<br>·外连接：<br>    左外连接：查询左表所有数据（包括两张表交集部分）<br>    右外连接：查询右表所有数据（包括两张表交集部分）<br>·子查询</p>
<h4 id="内连接："><a href="#内连接：" class="headerlink" title="内连接："></a>内连接：</h4><p>·隐式内连接：select 字段列表 from 表1，表2 where 条件…;<br>·显示内连接：select 字段列表 from 表1 [inner] join 表2 on 连接条件…;</p>
<h4 id="外连接："><a href="#外连接：" class="headerlink" title="外连接："></a>外连接：</h4><p>·左外连接：select 字段列表 from 表1 left [outer] join 表2 on 连接条件…;<br>·右外连接：select 字段列表 from 表1 right [outer] join 表2 on 连接条件…;</p>
<h4 id="子查询："><a href="#子查询：" class="headerlink" title="子查询："></a>子查询：</h4><p>SQL语句中嵌套select语句，成为嵌套查询，又称子查询。<br>形式：select * from tb1 where column1&#x3D;(select column1 from tb2…);<br>子查询外部语句可以是insert&#x2F;update&#x2F;delete&#x2F;select，常见是select。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">分类：</span><br><span class="line">//假设三个表，员工表emp，部门表dept，其中员工表中含有dept_id字段表示来自哪个部门</span><br><span class="line"></span><br><span class="line">1.标量子查询：子查询返回的结果为单个值（数字、日期、字符串等），常用操作符：= &lt;&gt;(不等于) &lt; &lt;= &gt; &gt;= </span><br><span class="line">    A.查询&#x27;教研部&#x27;所有员工信息：</span><br><span class="line">        //要查询教研部的员工需要在部门表中拿到&#x27;教研部&#x27;的部门id，再到员工表中查询</span><br><span class="line">        //拆分：a.查询 教研部 的部门id：select id from dept where name=&#x27;教研部&#x27;;   ---&gt;得到结果为2</span><br><span class="line">               b.根据部门id查询所有员工信息：select * from emp where dept_id =2;</span><br><span class="line">        //组合：将b的&#x27;dept_id=2&#x27;替换为a，再外套括号：</span><br><span class="line">        select * from emp where dept_id =(select id from dept where name=&#x27;教研部&#x27;);</span><br><span class="line">    B.查询在&#x27;小王&#x27;入职之后的员工信息：</span><br><span class="line">    //拆分：a.要知道小王何时入职：select entrydate from emp where name=&#x27;小王&#x27;; ---&gt;得到结果为2024-01-01</span><br><span class="line">           b.时间大于a中的时间：select * from emp where entrydate &gt; &#x27;2024.1.1&#x27;;</span><br><span class="line">    //组合：select * from emp where entrydate &gt; (select entrydate from emp where name=&#x27;小王&#x27;);</span><br><span class="line">    </span><br><span class="line">2.列子查询：子查询返回的结果是一列（可以是多行），常用操作符：in、not in等</span><br><span class="line">	A.查询‘教研部’和‘咨询部’的所有员工信息：</span><br><span class="line">	//拆分：a.先拿到两个部门的id：select id from dept where name=&#x27;教研部&#x27; or name =&#x27;咨询部&#x27;; ---&gt;结果一列两行：2和3</span><br><span class="line">	       b.根据部门id，在emp中查询员工信息：select * from emp where dept_id in(2,3);</span><br><span class="line">	//组合：select * from emp where dept_id in(select id from dept where name=&#x27;教研部&#x27; or name =&#x27;咨询部&#x27;);</span><br><span class="line">	</span><br><span class="line">3.行子查询：子查询返回的结果为一行（可以是多列），常用操作符：= &lt;&gt; in not in</span><br><span class="line">	A.查询与‘小王’的 入职日期 及 职位 都相同的员工的员工信息：</span><br><span class="line">	//拆分：a.先拿到小王的入职日期和职位：</span><br><span class="line">			select entrydate，job from dept where name=&#x27;小王&#x27;; ---&gt;结果一行两列：2020-05-01 1</span><br><span class="line">	       b.查询与其入职日期和职位相同的员工信息：</span><br><span class="line">	         select * from emp where entrydate=&#x27;2020-05-01&#x27; and job=1;</span><br><span class="line">	//组合(注意对应字段的匹配)：</span><br><span class="line">        select * from emp </span><br><span class="line">        where entrydate=(select entrydate from dept where name=&#x27;小王&#x27;) </span><br><span class="line">        and job=(select entrydate，job from dept where name=&#x27;小王&#x27;);</span><br><span class="line">    但是这条查询语句多次出现相同子查询，效率低。优化：</span><br><span class="line">    b的查询语句有同义写法：select * from emp where (entrydate,job)=(&#x27;2020-05-01&#x27;,1);现在发现右侧括号中的就是a的查询结果</span><br><span class="line">    因此，直接使用a替换b中的查询结果：</span><br><span class="line">    select * from emp where (entrydate,job)=(select entrydate，job from dept where name=&#x27;小王&#x27;);</span><br><span class="line">    </span><br><span class="line">4.表子查询：子查询返回的结果是多行多列，常作为临时表，常用操作符：in</span><br><span class="line">	A.查询入职日期是&#x27;2020-01-01&#x27; 之后的员工信息，及其部门名称：</span><br><span class="line">	//拆分：a.先查询入职日期是&#x27;2020-01-01&#x27; 之后的员工信息：select * from emp where entrydate &gt;&#x27;2020-01-01&#x27;;</span><br><span class="line">	       b.再查询这部分员工的信息及其部门名称：select * from (临时表) e,dept d where e.dept_id=d.id;</span><br><span class="line">	//组合：将临时表替换为a：</span><br><span class="line">	  select e *,d.name from (select * from emp where entrydate &gt;&#x27;2020-01-01&#x27;) e ,dept d where e.dept_id=d.id;</span><br></pre></td></tr></table></figure>

<h3 id="事务："><a href="#事务：" class="headerlink" title="事务："></a>事务：</h3><p>事务：一组操偶做的集合，它是一个不可分割的工作单位。事务会把所有的操作作为一个整体一起向系统提交或撤销操作请求，即这些操作要么同时成功，要么同时失败。</p>
<p>事务控制：<br>·开启事务：start transcation; &#x2F; begin;<br>·提交事务：commit;<br>·回滚事务：rollback;</p>
<p>&#x3D;&#x3D;四大特性(ACID)：&#x3D;&#x3D;<br>·原子性 Atomicty：事务是不可分割的最小单元，要么全部成功，要么全部失败。<br>·一致性 Consistency：事务完成时，必须使所有数据都保持一致状态。<br>·隔离性 Isolation：数据库系统提供隔离机制，保证事务在不受外部并发操作影响的独立环境下运行。<br>·持久性 Durablity：事务一旦提交或回滚，它对数据库中的数据的改变就是永久的。</p>
<h3 id="索引："><a href="#索引：" class="headerlink" title="索引："></a>索引：</h3><p>索引(index)：是帮助数据库高效获取数据的数据结构。</p>
<p>优点：<br>·提高数据查询的效率，降低数据库的IO成本。<br>·通过索引列对数据进行排序，降低数据排序的成本，降低CPU消耗。</p>
<p>缺点：<br>·索引会占用存储空间。<br>·索引大大提高了查询效率，同时却也降低了insert、update、delete的效率。</p>
<p>结构：<br>MySQL支持的索引结构有很多，如：Hash索引、B+Tree索引、Full-Text索引等。我们平常所说的索引，如果没有特别指明都是默认B+Tree结构组织的索引。（二叉搜索树和红黑树在大数据量情况下层级深，检索速度慢，不使用）</p>
<p>B+Tree特点：<br>·每一个节点可以存储多个key(有n个key就有n个指针)。<br>·所有的数据都存储在叶子节点，非叶子节点仅用于索引数据。<br>·叶子节点形成了一个双向链表，便于数据的排序及区间范围查询。</p>
<p><img src="https://img-blog.csdnimg.cn/20201024114004740.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1MTkwNDky,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p>
<p>操作语法：<br>·创建索引： create [unique] index 索引名 on 表名(字段名 , …);     索引名一般为idx_ 表名_字段名]<br>·查看索引：show index from 表名;<br>·删除索引：drop index 索引名 on 表名;</p>
<p>·在建表时，主键字段会自动创建主键索引。<br>·添加唯一约束时，数据库实际上会添加唯一索引。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35190492/article/details/109257302?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171480749316800222836969%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=171480749316800222836969&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~top_positive~default-1-109257302-null-null.nonecase&utm_term=%E7%B4%A2%E5%BC%95&spm=1018.2226.3001.4450">一文搞懂MySQL索引所有知识点（建议收藏）</a></p>
<h2 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h2><p>MyBatis：优秀的持久层框架，用于简化JDBC(Java DataBase Connectivity)的开发。(持久层即controller-service-dao层中的dao层)目的：在Java程序中进行SQL语句的编写（通过注解&#x2F;XML）而非在数据库操作界面中。</p>
<h3 id="JDBC："><a href="#JDBC：" class="headerlink" title="JDBC："></a>JDBC：</h3><p>JDBC：使用Java语言操作关系型数据库的一套API，是由sun公司官方定义的一套操作所有关系型数据库的规范，即接口。各个数据库厂商去实现这套接口，提供数据库驱动jar包。我们可以使用这套接口（JDBC）编程，真正执行的代码是驱动jar包中的实现类。</p>
<h3 id="数据库连接池："><a href="#数据库连接池：" class="headerlink" title="数据库连接池："></a>数据库连接池：</h3><p>·数据库连接池是一个容器，负责分配、管理数据库连接（Connection），它允许应用程序重复使用一个现有的数据库连接，而不是重新创建。连接池还可以释放空闲时间（一直占有连接对象但是没有数据库操作）超过最大空闲时间的连接，来避免因为没有释放连接而引起的数据库连接遗漏。</p>
<p>在没有数据库连接时，客户端想要执行SQL语句时，首先要创建新的连接对象，然后再来执行SQL语句，执行完成后关闭连接来释放资源，每次都要开启连接再关闭连接，浪费资源。如果有数据库连接池，程序在启动时，就会在容器中初始化一定数量的连接对象，客户端在执行SQL语句时，就会从连接池中获取一个连接对象，再执行SQL语句，执行后归还连接对象给连接池，能够做到连接的复用。</p>
<p>·连接池优势：1.资源复用 2.提升系统响应速度（创建连接耗时耗费资源） 3.避免数据库连接遗漏</p>
<p>常见产品：C3P0、DBCP、Druid、Hikari(springboot默认)</p>
<h3 id="lombok："><a href="#lombok：" class="headerlink" title="lombok："></a>lombok：</h3><p>lombok是一个使用的Java类库，能通过注解的形式自动生成构造器、getter&#x2F;setter、equals、hashcode、toString等方法，并可以自动化生成日志变量，简化Java开发，提高效率。</p>
<p>lombok会在编译时自动生成对应的Java代码。</p>
<table>
<thead>
<tr>
<th>注解</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>@Getter&#x2F;@Setter</td>
<td>为所有属性提供get&#x2F;set方法</td>
</tr>
<tr>
<td>@ToString</td>
<td>会给类自动生成易阅读的toString方法</td>
</tr>
<tr>
<td>@EqualsAndHashCode</td>
<td>根据类所拥有的非静态字段自动重写equals方法和hashCode方法</td>
</tr>
<tr>
<td>@Data</td>
<td>提供了更综合的生成代码功能(@Getter+@Setter+@ToString+@EqualsAndHashCode)</td>
</tr>
<tr>
<td>@NoArgConstructor</td>
<td>为实体类生成无参的构造器方法</td>
</tr>
<tr>
<td>@AllArgConstructor</td>
<td>为实体类生成除了static修饰的字段之外带有各参数的构造器方法</td>
</tr>
</tbody></table>
<h3 id="MyBatis操作案例："><a href="#MyBatis操作案例：" class="headerlink" title="MyBatis操作案例："></a>MyBatis操作案例：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">案例：员工管理(表：emp、dept、user)</span><br><span class="line">首先要准备数据库、配置依赖、创建对应的实体类(pojo包下，并且习惯实体类的属性类型都为引用类型)、准备Mapper接口EmpMapper</span><br><span class="line"><span class="comment">//mapper包：</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmpMapper</span>&#123;</span><br><span class="line">    <span class="comment">//删除操作：</span></span><br><span class="line">    <span class="comment">//根据ID删除数据</span></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from emp where id =#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>;<span class="comment">//返回的值为执行操作后所影响的记录条数，void也可以。</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//新增操作：</span></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into emp(username,name,gender,image,job,entrydate,dept_id,create_time,update_time)&quot;+</span></span><br><span class="line"><span class="meta">     &quot;values(#&#123;username&#125;,#&#123;name&#125;,#&#123;gender&#125;,#&#123;image&#125;,#&#123;job&#125;,#&#123;entrydate&#125;,#&#123;deptId&#125;,#&#123;createTime&#125;,#&#123;updateTime&#125;&quot;)</span></span><br><span class="line"><span class="meta">    //注意占位符中所填写的变量名为emp类中的属性名，使用的是驼峰命名规则，而数据库表中的变量名使用下划线分格。</span></span><br><span class="line"><span class="meta">    public void insesrt(Emp emp);</span></span><br><span class="line"><span class="meta">    </span></span><br><span class="line"><span class="meta">    //新增（主键返回）:在数据添加成功后，需要获取插入数据库数据的主键</span></span><br><span class="line"><span class="meta">    //如：添加套餐数据时，还需要维护套餐菜品关系数据表</span></span><br><span class="line"><span class="meta">    实现：</span></span><br><span class="line"><span class="meta">    @Options(keyProperty = &quot;id&quot;,useGeneratedKeys = true)</span></span><br><span class="line"><span class="meta">    //keyProperty指定实体类中主键的属性名，useGeneratedKeys=true代表要获取主键。</span></span><br><span class="line"><span class="meta">    @Insert(&quot;insert into emp(username,name,gender,image,job,entrydate,dept_id,create_time,update_time))&quot;+ </span></span><br><span class="line"><span class="meta">    &quot;values(#&#123;username&#125;,#&#123;name&#125;,#&#123;gender&#125;,#&#123;image&#125;,#&#123;job&#125;,#&#123;entrydate&#125;,#&#123;deptId&#125;,#&#123;createTime&#125;,#&#123;updateTime&#125;&quot;)</span></span><br><span class="line"><span class="meta">    public void insesrt(Emp emp);</span></span><br><span class="line"><span class="meta">    //添加注解后会自动将生成的主键值赋给emp对象的id属性。</span></span><br><span class="line"><span class="meta">    //接下来就可以通过emp.getId()方法来获取插入数据的主键值。</span></span><br><span class="line"><span class="meta">    </span></span><br><span class="line"><span class="meta">    //更新操作：</span></span><br><span class="line"><span class="meta">    @Update(&quot;update emp set username=#&#123;username&#125;,name=#&#123;name&#125;,gender=#&#123;gender&#125;,image=#&#123;image&#125;,job=#&#123;job&#125;&quot;+</span></span><br><span class="line"><span class="meta">            &quot;entrydate=#&#123;entrydate&#125;,dept_id=#&#123;deptId&#125;,update_time=#&#123;updateTime&#125; where id=#&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">    public void update();</span></span><br><span class="line"><span class="meta">    </span></span><br><span class="line"><span class="meta">    //查询操作：</span></span><br><span class="line"><span class="meta">    //根据id查询</span></span><br><span class="line"><span class="meta">    @Select(&quot;select * from emp where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">    public Emp getById(Integer id);</span></span><br><span class="line"><span class="meta">    </span></span><br><span class="line"><span class="meta">    //经测试发现：返回值中depId、createTime和updateTime为null值，并没有被封装进来，why？</span></span><br><span class="line"><span class="meta">    //数据封装：如果实体类属性名和数据库表查询返回的字段名一致，mybatis会自动封装。</span></span><br><span class="line"><span class="meta">    //如果实体类属性名和数据库表查询返回的字段名不一致则不能自动封装。</span></span><br><span class="line"><span class="meta">    //方案一：给字段起别名，让别名与实体类属性一致</span></span><br><span class="line"><span class="meta">    @Select(&quot;select id,username,password,name,gender,image,job,entrydate,&quot;+</span></span><br><span class="line"><span class="meta">            &quot;dept_id deptId,create_time createTime,update_time updateTime&quot;+</span></span><br><span class="line"><span class="meta">            &quot;from emp where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">    public Emp getById(Integer id);</span></span><br><span class="line"><span class="meta">    //方案二：通过@Results，@Result注解手动映射封装(臃肿不推荐)</span></span><br><span class="line"><span class="meta">    @Results(&#123;</span></span><br><span class="line"><span class="meta">        @Result(column=&quot;dept_id&quot;,property=&quot;deptId&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column=&quot;create_time&quot;,property=&quot;createTime&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column=&quot;update_time&quot;,property=&quot;updateTime&quot;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line"><span class="meta">    @Select(&quot;select * from emp where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">    public Emp getById(Integer id);</span></span><br><span class="line"><span class="meta">    //方案三：开启mybatis的驼峰命名自动映射开关   a_column---&gt;aColumn</span></span><br><span class="line"><span class="meta">    //在application.properties中配置：关键字camel</span></span><br><span class="line"><span class="meta">    mybatis.configuration.map-underscore-to-camel-case=true</span></span><br><span class="line"><span class="meta">    //然后就不用进行任何操作了。</span></span><br><span class="line"><span class="meta">        </span></span><br><span class="line"><span class="meta">    //查询（条件查询）</span></span><br><span class="line"><span class="meta">    @Select(&quot;select * from emp where name like &#x27;%$&#123;name&#125;%&#x27; and gender=#&#123;gender&#125;&quot;+</span></span><br><span class="line"><span class="meta">            &quot;and entrydate between #&#123;begin&#125; and #&#123;end&#125; order by update_time desc&quot;)</span></span><br><span class="line"><span class="meta">    public List&lt;Emp&gt; list(String name,Short gender,LocalDate degin,LocalDate end);</span></span><br><span class="line"><span class="meta">    //注意在使用模糊匹配的时候，由于#&#123;&#125;会进行预编译被？替代，而？是不能出现在引号之内，所以#&#123;&#125;不能出现在引号之内</span></span><br><span class="line"><span class="meta">    //因此要使用&#x27;%$&#123;name&#125;%&#x27;，由于$&#123;&#125;时进行拼接的，可以直接将name拼接到&#x27;% %&#x27;中间，实现模糊匹配。</span></span><br><span class="line"><span class="meta">    //但是存在问题：性能低、不安全，存在SQL注入问题。</span></span><br><span class="line"><span class="meta">    //解决方案：MySQL提供了一个拼接字符串的函数：contact(&#x27;hello&#x27;,&#x27; mysql&#x27;,&#x27; string&#x27;) --&gt;hello mysql string</span></span><br><span class="line"><span class="meta">     @Select(&quot;select * from emp where name like contact(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;) and gender=#&#123;gender&#125;&quot;+</span></span><br><span class="line"><span class="meta">            &quot;and entrydate between #&#123;begin&#125; and #&#123;end&#125; order by update_time desc&quot;)</span></span><br><span class="line"><span class="meta">    public List&lt;Emp&gt; list(String name,Short gender,LocalDate degin,LocalDate end);</span></span><br><span class="line"><span class="meta">&#125;</span></span><br></pre></td></tr></table></figure>

<p>可以在application.properties中打开MyBatis的日志，并指定输出到控制台。<br>mybatis.configuration.log-impl&#x3D;org.apache.ibatis.logging.stdout.StdOutImpl<br>配制不用记，idea有智能提示，只需输入关键信息如：mybatis log（日志）就会弹出提示，StdOutImpl就是输出到控制台。<br>在控制台中可以看到几行输出：<br>&#x3D; &#x3D;&gt; Preparing: delete from emp where id &#x3D; ?<br>&#x3D; &#x3D;&gt; Parameters: 16(Integer)<br>&lt;&#x3D; &#x3D; Updates:1<br>前面两行称为预编译SQL，预编译SQL的优势为：性能更高，更安全（防止SQL注入）</p>
<p><strong>为什么预编译的SQL性能更高？</strong><br>普通情况下，Java程序中的SQL语句要经过SQL语法解析检查、优化SQL、编译SQL等步骤，并将结果存储在缓存中，然后再执行SQL。假设有三条SQL分别为：delete from emp where id &#x3D;1; delete from emp where id &#x3D;2; delete from emp where id &#x3D;3; 执行这三条时尽管只有id的值不同，但是对于数据库来说每一条都是不同的，因此需要重复执行上述步骤而不能从缓存中直接得到编译后的结果，因此效果不好。如果采用的是预编译的SQL，那么首先会将SQL语句变为：delete from emp where id &#x3D; ?; 再将参数123传进去，这样就不需要三次检查优化编译SQL了，因此性能更高。</p>
<p><strong>为什么预编译的SQL更安全？</strong><br>·首先啥是SQL注入？SQL注入是通过操作输入的数据来修改实现定义好的SQL语句，以达到执行代码对服务器进行攻击的方法。<br>·例如一个登陆界面，要输入账号和密码，后端的SQL语句为一个查询：select count( * ) from emp where username&#x3D;’ ‘ and password&#x3D;’ ‘;只要输入的用户密码正确返回结果为1，否则为0，但是倘若我用户名随意输入，而密码输入：’or ‘1’ &#x3D;’1 ，这样后端接收到数据之后SQL语句变为：select count(*) from emp where username&#x3D;’werewr’ and password&#x3D;’ ‘or ‘1’&#x3D; ‘1’; 严格按照密码中的内容输入后发现SQL语句的含义已经被修改了，这条SQL语句结果永远为true，由此可见直接拼接参数的方法存在缺陷；而预编译使用？作为占位符，进行预编译就可以预防SQL注入。（在使用MyBatis时只要编写SQL语句时使用#{ }占位符就是使用了预编译SQL）</p>
<p><strong>参数占位符分为两种：#{ }和${ }区别：</strong><br>#{ }：·执行SQL时，会将#{…}替换为？，生成预编译SQL，会自动设置参数值。·使用时机：参数传递，都使用#{ }。<br>${ }：·拼接SQL。直接将参数拼接在SQL语句中，存在SQL注入问题。·使用时机：如果对表名、列表进行动态设置时使用。</p>
<h3 id="XML映射文件："><a href="#XML映射文件：" class="headerlink" title="XML映射文件："></a>XML映射文件：</h3><p>规范：<br>·XML映射文件的名称与Mapper接口名称一致，并且将XML映射文件和Mapper接口放置在相同包下（同包同名）<br>·XML映射文件的namespace属性为Mapper接口全限定名一致<br>·XML映射文件中sql语句的id与Mapper接口中的方法名一致，并保持返回类型一致。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--在java目录中的com.wang.mapper包下，接口名为EmpMapper--&gt;</span></span><br><span class="line">@Mapper</span><br><span class="line">public interface EmpMapper&#123;</span><br><span class="line">	public List<span class="tag">&lt;<span class="name">Emp</span>&gt;</span> list(String name,Short gender,LocalDate begin,LocalDate end);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">&lt;!--在resource目录中的com.wang.mapper包下，名为EmpMapper--&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--xml需要配置，直接在mybatis官网查找即可--&gt;</span> </span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--mybatis中文网/入门目录下--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.wang.mapper.EmpMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--resultType为单条记录所封装的类型--&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.wang.pojo.Emp&quot;</span>&gt;</span></span><br><span class="line">        select * from emp where name like contact(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;) and gender=#&#123;gender&#125; </span><br><span class="line">        and entrydate between #&#123;begin&#125; and #&#123;end&#125; order by update_time desc </span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>MyBatisX：一款基于IDEA的快速开发Mybatis的插件，效率高。</p>
<p>使用注解还是XML映射？官网中有一段话：“使用注解来映射简单语句会使代码显得更加简介，但对于稍微复杂一点的语句，Java注解不仅力不从心，还会让你本就复杂的SQL语句更加混乱不堪。因此如果你需要做一些很复杂的操作，最好用XML来映射语句。选择何种方式来配置映射，以及认为是否应该要统一映射语句定义的形式，完全取决于你和你的团队。 换句话说，永远不要拘泥于一种方式，你可以很轻松的在基于注解和 XML 的语句映射方式间自由移植和切换。”</p>
<h3 id="MyBatis动态SQL："><a href="#MyBatis动态SQL：" class="headerlink" title="MyBatis动态SQL："></a>MyBatis动态SQL：</h3><p>动态SQL：随着用户的输入或外部条件的变化而变化的SQL语句成为动态SQL。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">例：条件查询：分为姓名，性别，入职时间（范围）三个，当三个都不输入的话，那么三个属性的值都为null，传入到预编译的SQL之后返回来的数据是零条，但是我希望当我全不输入的时候返回全部的信息，这样场景下需要动态SQL：</span><br><span class="line">解决：通过if标签进行改造：</span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.wang.mapper.EmpMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.wang.pojo.Emp&quot;</span>&gt;</span></span><br><span class="line">        select id,username,password,name,gender,image,job,entrydate,dept_id deptId,create_time from emp</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span> </span><br><span class="line">        	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name!=null and name!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                name like contact(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender!=null&quot;</span>&gt;</span></span><br><span class="line">                and gender = #&#123;gender&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;begin!=null and end!=null&quot;</span>&gt;</span></span><br><span class="line">                and entrydate bewtween #&#123;begin&#125; and #&#123;end&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">        order by update_time desc</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;/mapper&gt; 后面还有代码，放在最后了--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--where标签：--&gt;</span> </span><br><span class="line">不使用<span class="tag">&lt;<span class="name">where</span>&gt;</span><span class="tag">&lt;/<span class="name">where</span>&gt;</span>标签会导致错误：</span><br><span class="line">例如直接使用where，但是name为空而gender不为空，那么处理后的语句where and gender...会出现一个and导致错误</span><br><span class="line">又或者三个条件都不成立则会多出一个where（where后面没有条件）</span><br><span class="line">where标签作用：</span><br><span class="line">·根据子标签中的判断条件动态生成where关键字--&gt;如果子标签都不成立则不会生成where关键字，有成立的子标签则会生成</span><br><span class="line">·自动去除掉条件前多余的and或者or</span><br><span class="line"></span><br><span class="line">除了多条件查询可能需要动态SQL，update操作也可能需要，当update的字段只包含部分信息时就需要动态SQL</span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span>&gt;</span></span><br><span class="line">    update emp</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username!=null and username!=&#x27;&#x27;&quot;</span>&gt;</span>username =#&#123;username&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name!=null&quot;</span>&gt;</span>name =#&#123;name&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender!=null&quot;</span>&gt;</span>gender =#&#123;gender&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;image!=null&quot;</span>&gt;</span>image =#&#123;image&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;job!=null&quot;</span>&gt;</span>job =#&#123;job&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;entrydate!=null&quot;</span>&gt;</span>entrydate =#&#123;entrydate&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;deptId!=null&quot;</span>&gt;</span>dept_id =#&#123;deptId&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateTime!=null&quot;</span>&gt;</span>update_time =#&#123;updateTime&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--set标签：--&gt;</span> </span><br><span class="line">不使用<span class="tag">&lt;<span class="name">set</span>&gt;</span><span class="tag">&lt;/<span class="name">set</span>&gt;</span>标签有可能导致多出逗号（就像where中多出了and或者or一样）</span><br><span class="line">set标签作用：</span><br><span class="line">·根据子标签中的判断条件动态生成set关键字</span><br><span class="line">·自动去除掉所要更新字段前多余的逗号</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--foreach标签：--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--批量删除--&gt;</span></span><br><span class="line">public void deleteByIds(List<span class="tag">&lt;<span class="name">Integer</span>&gt;</span> ids);<span class="comment">&lt;!--java目录下com.wang.Mapper.EmpMapper--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByIds&quot;</span>&gt;</span></span><br><span class="line">    delete from emp where id in</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">   collection：要遍历的集合</span></span><br><span class="line"><span class="comment">   item：遍历出来的元素</span></span><br><span class="line"><span class="comment">   separator：分隔符</span></span><br><span class="line"><span class="comment">   open：遍历开始前拼接的SQL片段</span></span><br><span class="line"><span class="comment">   close：遍历结束后拼接的SQL片段</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">测试：</span><br><span class="line">	@Autowired</span><br><span class="line">    private EmpMapper empMapper;</span><br><span class="line">    @Test</span><br><span class="line">    public void testDeletByIds()&#123;</span><br><span class="line">        List<span class="tag">&lt;<span class="name">Integer</span>&gt;</span> ids=Arrays.asList(10,11,12);</span><br><span class="line">        empMapper.deleteByIds(ids);</span><br><span class="line">    &#125; ---&gt;结果正确！</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--sql&amp;include标签--&gt;</span></span><br><span class="line">问题：当xml文件中所选中的字段很多且重复（例如list和getById的select的字段很多且相同），为了提高代码复用性</span><br><span class="line">    ①将要抽取的代码放入sql标签中，并指定唯一标识 ②引用sql片段</span><br><span class="line"></span><br><span class="line">    以动态查询为例：</span><br><span class="line">    ①将要抽取的代码放入sql标签中，并指定唯一标识</span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">commonSelect</span>&gt;</span></span><br><span class="line">        select id,username,password,name,gender,image,job,entrydate,dept_id deptId,create_time </span><br><span class="line">        from emp</span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.wang.pojo.Emp&quot;</span>&gt;</span></span><br><span class="line">        ②引用sql片段：</span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;commonSelect&quot;</span>/&gt;</span>   (直接自闭和即可)</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name!=null and name!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                name like contact(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender!=null&quot;</span>&gt;</span></span><br><span class="line">                and gender = #&#123;gender&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;begin!=null and end!=null&quot;</span>&gt;</span></span><br><span class="line">                and entrydate bewtween #&#123;begin&#125; and #&#123;end&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">        order by update_time desc</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="登录功能："><a href="#登录功能：" class="headerlink" title="登录功能："></a>登录功能：</h2><p>最基础的通过Controller层调用Service再调用Mapper进行数据库的数据查询来进行登录操作会出先问题：<br>在未登陆的情况下，可以通过直接访问其他页面的地址而跳过登陆操作。因此需要登录校验功能：</p>
<p>登录标记：用户登录成功后，每一次请求中，都可以获取到该标记。（会话技术）<br>统一拦截：每一次请求都拦截，如果能拿到登录标记就放行：·Filter过滤器  ·Interceptor拦截器</p>
<h3 id="会话技术："><a href="#会话技术：" class="headerlink" title="会话技术："></a>会话技术：</h3><p>会话：用户打开浏览器，访问web服务器的资源，会话建立，直到有一方断开连接，会话结束。再一次会话中可以包含多次请求和响应。<br>会话跟踪：一种维护浏览器状态的方法，服务器需要识别多次请求是否来自于同一浏览器，以便在同一次会话的多次请求间共享数据。<br>会话跟踪方案：①客户端会话跟踪技术：Cookie   ②服务端会话跟踪技术：Session   ③令牌技术</p>
<p>会话跟踪方案对比：<br><strong>①Cookie：</strong>浏览器在第一次请求服务器时，服务端会自动设置一个Cookie，在cookie中存储相应的信息，服务端在给客户端响应数据时，自动将Cookie响应给浏览器，浏览器获得Cookie后将数据存储在本地，之后的每次请求都会将Cookie自动携带到服务端。<br><strong>·优点：</strong>HTTP协议中支持的技术（在http请求中通过请求头Cookie:name&#x3D;value携带到服务端，服务端通过响应头Set-Cookie:name&#x3D;value获取Cookie，Tomcat等web服务器中提供了cookie操作的API，可以方便的设置和获取Cookie）<br><strong>·缺点：</strong>Ⅰ.移动端APP无法使用Cookie。<br>            Ⅱ.不安全，用户可以自己禁用Cookie。<br>            Ⅲ.Cookie不能跨域(跨域区分三个维度：协议、IP&#x2F;域名、端口，任意一个维度不同都属于跨域操作)。<br>（由于前后端服务器经常部署在不同的服务器上，因此域名和端口号都有可能不同，例如前端服务器部署在192.168.150.200:80，后端服务器部署在192.168.150.100:8080，浏览器在访问时会访问前端服务器以获取界面信息，而数据最终是由后端服务器返回，因此页面处于<a target="_blank" rel="noopener" href="http://192.168.150.200/login.html%EF%BC%8C%E6%B2%A1%E6%9C%89%E5%86%99%E7%AB%AF%E5%8F%A3%E5%8F%B7%E9%BB%98%E8%AE%A480%EF%BC%8C%E8%80%8C%E8%A6%81%E8%AF%B7%E6%B1%82%E7%9A%84%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A5%E5%8F%A3%E5%9C%B0%E5%9D%80%E4%B8%BAhttp://192.168.150.100:8080/login%EF%BC%8C%E9%A1%B5%E9%9D%A2%E5%BD%93%E5%89%8D%E7%9A%84%E4%BD%8D%E7%BD%AE%E5%92%8C%E8%AF%B7%E6%B1%82%E7%9A%84%E4%BD%8D%E7%BD%AE%E4%B8%8D%E7%9B%B8%E5%90%8C%EF%BC%8C%E5%B1%9E%E4%BA%8E%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%EF%BC%89">http://192.168.150.200/login.html，没有写端口号默认80，而要请求的后端服务器接口地址为http://192.168.150.100:8080/login，页面当前的位置和请求的位置不相同，属于跨域请求）</a></p>
<p><strong>②Session：</strong>浏览器在第一次请求服务器时，会在服务端开辟空间设置Session，用于存储用户信息，并记录id，接下来服务端在给浏览器响应数据时会将Session设置到Cookie中（响应头中加入Set-Cookie:JSESESSION&#x3D;…的响应头），浏览器接收到数据后将Cookie存储在本地，接下来的每次请求都会将Cookie携带到服务端，服务器拿到Session id之后就会在众多Session中找到对应的Session。<br><strong>·优点：</strong>存储在服务端，安全<br><strong>·缺点：</strong>Ⅰ.服务器集群环境下无法直接使用Session（请求和响应可能发生在不同服务器上，而服务器之间的Session不能共享）。<br>            Ⅱ.包括Cookie的所有缺点。（底层基于Cookid）</p>
<p><strong>③令牌技术：</strong>本质就是一个字符串，在登录时登陆成功就会生成一个令牌，响应数据时将令牌响应给前端，浏览器可以将令牌存储在Cookie中，也可以存储在其他存储空间中，接下来的每次请求都要将令牌携带到服务端，有服务端校验令牌的有效性，共享的数据存储在令牌中。<br><strong>·优点：</strong>Ⅰ.支持PC端、移动端 。  Ⅱ.解决集群环境下的认证问题（服务器端没有存储数据） 。  Ⅲ.减轻服务器端的存储压力。<br><strong>·缺点：</strong>需要自己实现。</p>
<h3 id="JWT令牌："><a href="#JWT令牌：" class="headerlink" title="JWT令牌："></a>JWT令牌：</h3><p>JWT：<a target="_blank" rel="noopener" href="https://jwt.io/">JSON Web Token</a>，定义了一种简洁的(就是字符串)、自包含的格式(看似随机，但是可以在JWT令牌中存储自定义的内容)，用于在通信双方以json数据格式安全的传输信息。由于数字签名的存在，这些信息是可靠的。</p>
<p>组成：不同组成部分通过点.分隔<br>1.第一部分：Header(头)，记录令牌类型、签名算法等。例如：{“alg”:”HS256”,”type”:”JWT”}<br>2.第二部分：Payload(有效载荷)，携带一些自定义信息、默认信息等。例如：{“id”:”1”,”username”:”Tom”}（亲两个部分都是base64编码，能够解码）<br>3.第三部分：Signature(签名)，防止Token被篡改、确保安全性。融入header、payload，并加入指定秘钥，通过指定签名算法计算而来。</p>
<p>·场景：登陆认证<br>①登录成功后生成令牌<br>②后续每个请求，都要携带JWT令牌，系统在每次请求处理前，先校验令牌，通过后，再处理。</p>
<h4 id="JWT-生成："><a href="#JWT-生成：" class="headerlink" title="JWT-生成："></a>JWT-生成：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *生成JWT密钥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGenJWT</span><span class="params">()</span>&#123;</span><br><span class="line">    Map&lt;String,Object&gt; claims = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    claims.put(<span class="string">&quot;id&quot;</span>,<span class="number">1</span>);</span><br><span class="line">    claims.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    Jwts.builder()  <span class="comment">//链式编程</span></span><br><span class="line">        .signWith(SignatureAlgorithm.HS256,<span class="string">&quot;wang&quot;</span>) <span class="comment">//签名算法</span></span><br><span class="line">        .setClaims(claims) <span class="comment">//自定义内容(载荷)</span></span><br><span class="line">        .setExpiration(<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis()+<span class="number">3600</span>*<span class="number">1000</span>)) <span class="comment">//设置有效期为1h</span></span><br><span class="line">        .compact();</span><br><span class="line">    System.out.oprintln(jwt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *解析JWT密钥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testParseJWT</span><span class="params">()</span>&#123;</span><br><span class="line">    Jwts.parser()</span><br><span class="line">        	.setSigningKey(<span class="string">&quot;wang&quot;</span>)</span><br><span class="line">        	.parseClaimsJws(<span class="string">&quot;.........&quot;</span>)</span><br><span class="line">        	.getBody();</span><br><span class="line">    System.out.println(claims);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="登录后下发令牌："><a href="#登录后下发令牌：" class="headerlink" title="登录后下发令牌："></a>登录后下发令牌：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">步骤：</span><br><span class="line">    ·引入JWT令牌操作工具类</span><br><span class="line">    ·登录完成后，调用工具类生成JWT令牌，并返回</span><br><span class="line"><span class="comment">//在utils包（工具类包）下创建工具类：JwtUtils</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtUtils</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String signKey=<span class="string">&quot;wang&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Long expire=<span class="number">43200000L</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *生成JWT密钥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">generateJWT</span><span class="params">(Map&lt;String,Object claims&gt;)</span>&#123;</span><br><span class="line">        String jwt=Jwts.builder()  <span class="comment">//链式编程</span></span><br><span class="line">            .addClaims(claims) <span class="comment">//自定义内容(载荷)</span></span><br><span class="line">            .signWith(SignatureAlgorithm.HS256,signKey) <span class="comment">//签名算法</span></span><br><span class="line">            .setExpiration(<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis()+expire)) <span class="comment">//设置有效期为1h</span></span><br><span class="line">            .compact();</span><br><span class="line">       <span class="keyword">return</span> jwt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *解析JWT密钥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Claims <span class="title function_">ParseJWT</span><span class="params">(String jwt)</span>&#123;</span><br><span class="line">        Claims claims=Jwts.parser()</span><br><span class="line">                .setSigningKey(signKey)</span><br><span class="line">                .parseClaimsJws(jwt)</span><br><span class="line">                .getBody();</span><br><span class="line">        <span class="keyword">return</span> claims;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//LoginController类中：</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span>&#123;</span><br><span class="line">    <span class="meta">@AutoWired</span></span><br><span class="line">    <span class="keyword">private</span> EmpService empService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">login</span><span class="params">(<span class="meta">@RequestBody</span> Emp emp)</span>&#123;</span><br><span class="line">        Emp e=empService.login(emp); <span class="comment">//Service层调用Mapper层，具体实现略，就是一个根据username和password的查询</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//登录成功，生成令牌，下发令牌</span></span><br><span class="line">        <span class="keyword">if</span>(e!=<span class="literal">null</span>)&#123;</span><br><span class="line">            Map&lt;String,Object&gt; claims=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            claims.put(<span class="string">&quot;id&quot;</span>,e.getId());</span><br><span class="line">            claims.put(<span class="string">&quot;name&quot;</span>,e.getName());</span><br><span class="line">            claims.put(<span class="string">&quot;username&quot;</span>,e.getUsername());</span><br><span class="line">            </span><br><span class="line">            String jwt=JwtUtils.generateJWT(claims);<span class="comment">//jwt包含了当前登录的员工信息</span></span><br><span class="line">            <span class="keyword">return</span> Result.success(jwt);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//登录失败，返回错误信息</span></span><br><span class="line">        <span class="keyword">return</span> e !=<span class="literal">null</span> ?Result.success():Result.error(<span class="string">&quot;用户名或密码错误&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="过滤器Filter："><a href="#过滤器Filter：" class="headerlink" title="过滤器Filter："></a>过滤器Filter：</h3>
    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>王香芋
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://example.com/2024/05/09/JavaWeb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="JavaWeb学习笔记">http://example.com/2024/05/09/JavaWeb学习笔记/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/Java%E3%80%81%E7%AC%94%E8%AE%B0/" rel="tag"># Java、笔记</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/03/12/UML%E7%B1%BB%E5%9B%BE%E5%9F%BA%E7%A1%80/" rel="prev" title="UML类图基础">
                  <i class="fa fa-angle-left"></i> UML类图基础
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">王香芋</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共40.4k字</span>
  
  
  
</div>


    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  




  <script src="/js/third-party/pace.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
